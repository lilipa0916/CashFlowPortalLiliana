@using Microsoft.AspNetCore.Components.Authorization


<AuthorizeView>
    <Authorized>
        <div class="nav-container">
            <!-- Mantenimientos -->
            <div class="nav-section @(mantenimientoOpen ? "expanded active" : "")"
                 @onclick="() => Toggle(ref mantenimientoOpen)"
                 @onmouseover="() => Toggle(ref mantenimientoOpen)">
                Mantenimientos
            </div>
            <ul class="submenu @(mantenimientoOpen ? "expanded" : "")">
                <li>
                    <NavLink href="/tipogastos">
                        <i class="bi bi-cash-stack me-2"></i>
                        Tipos de Gasto
                    </NavLink>
                </li>
                <li>
                    <NavLink href="/fondos">
                        <i class="bi bi-bank me-2"></i>
                        Fondo Monetario
                    </NavLink>
                </li>
            </ul>

            <!-- Movimientos -->
            <div class="nav-section @(movimientosOpen ? "expanded active" : "")"
                 @onclick="() => Toggle(ref movimientosOpen)"
                 @onmouseover="() => Toggle(ref movimientosOpen)">
                Movimientos
            </div>
            <ul class="submenu @(movimientosOpen ? "expanded" : "")">
                <li>
                    <NavLink href="/movimientos/presupuesto">
                        <i class="bi bi-calendar2-check me-2"></i>
                        Presupuestos
                    </NavLink>
                </li>
                <li>
                    <NavLink href="/movimientos/gastos">
                        <i class="bi bi-receipt me-2"></i>
                        Registros de Gastos
                    </NavLink>
                </li>
                <li>
                    <NavLink href="/movimientos/deposito">
                        <i class="bi bi-wallet2 me-2"></i>
                        Depósitos
                    </NavLink>
                </li>
            </ul>

            <!-- Consultas y Reportes -->
            <div class="nav-section @(consultasOpen ? "expanded active" : "")"
                 @onclick="() => Toggle(ref consultasOpen)"
                 @onmouseover="() => Toggle(ref consultasOpen)">
                Consultas y Reportes
            </div>
            <ul class="submenu @(consultasOpen ? "expanded" : "")">
                <li>
                    <NavLink href="/consultas">
                        <i class="bi bi-search me-2"></i>
                        Consulta de Movimientos
                    </NavLink>
                </li>
                <li>
                    <NavLink href="/reportes">
                        <i class="bi bi-bar-chart me-2"></i>
                        Gráfico Comparativo
                    </NavLink>
                </li>
            </ul>
        </div>
    </Authorized>
    <NotAuthorized>
        <div class="nav-container">
            <div class="nav-section">
                <NavLink href="/login" class="nav-link d-flex align-items-center">
                    <i class="bi bi-box-arrow-in-right me-2"></i>
                    Iniciar Sesión
                </NavLink>
            </div>
        </div>
    </NotAuthorized>
</AuthorizeView>


@code {
    private bool mantenimientoOpen;
    private bool movimientosOpen;
    private bool consultasOpen;

    void Toggle(ref bool flag) => flag = !flag;
}
